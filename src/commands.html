<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <meta name="msapplication-TileColor" content="#24252a">
    <meta name="theme-color" content="#24252a">
    <meta property="og:image" content="https://agnessbot.github.io/src/assets/agness_rounded.png">
    <meta property="og:title" content="Agness">
    <meta property="og:description" content="I'm a bot in charge of interaction, entertainment and giving roles through reactions, so that your server is a much more attractive and pleasant place.">
    <meta property="description" content="I'm a bot in charge of interaction, entertainment and giving roles through reactions, so that your server is a much more attractive and pleasant place.">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="icon" type="image/png" href="assets/agness_rounded.png">
    <title>Agness</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script crossorigin src="https://unpkg.com/scrollreveal"></script>
</head>
<body class="ScrollReveal bg-gray-dark">
    <header class="bg-blue-burple flex-col">
        <nav class="ScrollReveal container px-4 py-2 mx-auto">
            <div class="flex justify-between items-center flex-col md:flex-row">
                <div class="ScrollReveal flex items-center my-2">
                    <img src="assets/agness_rounded.png" alt="agness logo" width="40">
                    <a class="ScrollReveal text-xl font-semibold text-white px-3 hover:underline" href="#">
                        Agness
                    </a>
                </div>
                <div class="ScrollReveal flex items-center text-base md:text-lg p-2 text-gray-100">
                    <a class="ScrollReveal font-semibold hover:underline rounded-lg px-3 md:px-6 py-1" href="index.html">Home</a>
                    <a class="ScrollReveal font-semibold hover:underline rounded-lg px-3 md:px-6 py-1" href="#">About</a>
                    <a class="ScrollReveal font-semibold hover:underline rounded-lg px-3 md:px-6 py-1" href="commands.html">Commands</a>
                </div>
            </div>
        </nav>
    </header>
    <div class="flex justify-center items-center flex-col px-5 md:px-40">
        <div class="mt-10 bg-gradient-to-tl from-blue-900 to-blue-burple w-full text-white p-5 rounded">
            <h1 class="font-black">PREFIX</h1>
            <p>Default: a?</p>
            <p>And @mention prefix</p>
            <h1 class="text-xl font-semibold">Mode of use</h1>
            <p>The [ and ] around the argument mean that it is required.</p>
            <p> The < and > around the argument mean that it is optional.</p>
        </div>
        <div id="commands" class="flex justify-center items-center mt-10 flex-col">
    </div>
    </div>
    <script type="text/babel">
        fetch('https://agness-469c6-default-rtdb.firebaseio.com/commands.json')
            .then(response => response.json())
            .then(commands => {
                const $commands = document.getElementById("commands");
                const useState = React.useState;
                const categories = [...new Set(commands.map((a) => a.category))];
                console.log(categories)
                const CommandsComponent = () => {
                    const [categoryState, setCategoryState] = useState("All");
                    const [searchCommand, setSearchCommand] = useState("");
                    const commandsFilter = commands
                        .filter(command => {
                            if(!searchCommand && categoryState === "All") {
                                return command;
                            } else if (command.name.toLowerCase().includes(searchCommand) && command.category === categoryState || categoryState === 'All' && command.name.toLowerCase().includes(searchCommand)) {
                                return command;
                            }
                        })
                        let hasCommandFilter;
                        if(commandsFilter.length) {
                            hasCommandFilter = 
                            <div className={"bg-gray-600 p-5 rounded-md my-10"}>
                                <table className={"w-full bg-gray-color-dark-200 shadow-inner rounded-t-2xl"}>
                                    <thead> 
                                        <tr className={"text-white bg-blue-burple font-bold"}>
                                            <th className={"border border-white px-4 py-2 font-medium"}>
                                                Command
                                            </th>
                                            <th className={"border border-white px-4 py-2 font-medium"}>
                                                Description
                                            </th>
                                            <th className={"border border-white px-4 py-2 font-medium"}>
                                                Usage
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody className={"text-gray-color_text text-xs"}>
                                        {
                                            commandsFilter
                                            .map((command, index) => {
                                            return (
                                                <tr 
                                                    key={index}
                                                >
                                                    <td
                                                        className={"border border-white px-4 py-2 font-medium"}
                                                    >
                                                        {command.name}
                                                    </td>
                                                    <td
                                                        className={"border border-white px-4 py-2 font-medium"}
                                                    >
                                                        {command.description.en}
                                                    </td>
                                                    <td
                                                        className={"border border-white px-4 py-2font-medium"}
                                                    >
                                                        {command.usage}
                                                    </td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                            </div>
                        } else {
                            
                            hasCommandFilter = 
                            <div className={"bg-gray-600 p-5 rounded-md my-10"}>
                                <h1 className="text-white text-3xl text-center">Command not found</h1>
                            </div>
                        }
                    return (
                        <div className={"flex justify-center items-center flex-col w-full"}>
                            <div className={"flex justify-center items-center flex-wrap flex-col lg:flex-row bg-gray-extra_dark p-5 m-5 border-2 border-gray-color_text w-full rounded-xl"}>
                                {['All',...categories].map((category, index) => {
                                    if (category === "All") {
                                        
                                    }
                                    return (
                                        <a
                                            className={
                                                category === categoryState ?
                                                "my-3 bg-blue-burple text-white py-2 px-4 transform rounded-md mx-5 cursor-pointer shadow-xl "
                                                :
                                                "my-3 bg-gray-color_dark-100 text-gray-color_text hover:bg-gray-color_hover hover:text-white duration-200 py-2 px-4 transform rounded-lg mx-5 cursor-pointer"
                                            }
                                            key={index}
                                            onClick={() => setCategoryState(category)}
                                        >
                                            <span className={"font-extrabold"}>{category}</span>
                                            <span className={"absolute -right-3 -bottom-3 px-2 py-0.5 bg-red-500 text-white text-sm rounded-full font-extrabold shadow-2xl"}>
                                            {
                                            commands.filter(
                                                (command) => {
                                                    if(category === "All") {
                                                        return command;
                                                    } else if(command.category === category) {
                                                        return command
                                                    }
                                                }
                                            ).length
                                            }
                                            </span>
                                        </a>
                                    );
                                })}
                            </div>
                            <input
                                type="text"
                                maxLength="15"
                                className={"bg-gray-color-dark-200 text-gray-color_text appearance-none block rounded-lg py-3 px-4 focus:outline-none my-5 w-full border-2 border-transparent focus:border-white"} 
                                placeholder="Search"
                                onChange={(event) => {
                                    setSearchCommand(event.target.value.trim())
                                }}
                            />
                            {hasCommandFilter}
                    </div>
                    )
                }
                ReactDOM.render(
                    <div>
                        <CommandsComponent/>
                    </div>,
                $commands);
            });
    </script>
</body>
</html>